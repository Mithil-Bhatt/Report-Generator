<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Auto Total Form</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 16px;
    background: #f8f9fa;
  }
  h2 {
    background: #e0e0e0;
    padding: 8px;
    margin-top: 24px;
    border-radius: 4px;
  }
  .form-row {
    display: flex;
    margin: 6px 0;
    align-items: center;
  }
  .form-row label {
    flex: 3;
  }
  .form-row input[type="number"] {
    flex: 2;
    padding: 6px 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }
  .total-row {
    display: flex;
    margin: 12px 0;
    background: #ddd;
    padding: 8px;
    font-weight: bold;
    border-radius: 4px;
  }
  .total-row div:first-child {
    flex: 3;
  }
  .total-row div:last-child {
    flex: 2;
    text-align: right;
  }
  button {
    margin-top: 32px;
    padding: 10px 24px;
    font-size: 16px;
    border: none;
    background: #007bff;
    color: white;
    border-radius: 6px;
    cursor: pointer;
  }
  button:hover {
    background: #0056b3;
  }
  #form-container {
    background: white;
    padding: 16px;
    border-radius: 8px;
    box-shadow: 0 0 8px #ccc;
    max-width: 600px;
    margin: auto;
  }
</style>
</head>
<body>

<div id="form-container">

  <h2>Number of Windows Work</h2>
  <div class="form-row">
    <label for="shift1">Shift 1</label>
    <input type="number" id="shift1" value="0" min="0" />
  </div>
  <div class="form-row">
    <label for="shift2">Shift 2</label>
    <input type="number" id="shift2" value="0" min="0" />
  </div>
  <div class="total-row">
    <div>Total</div>
    <div id="totalWindowsWork">0</div>
  </div>

  <h2>Refund Form</h2>
  <div class="form-row"><label for="refundForms">Forms</label><input type="number" id="refundForms" value="0" min="0" /></div>
  <div class="form-row"><label for="refundTickets">Tickets</label><input type="number" id="refundTickets" value="0" min="0" /></div>
  <div class="form-row"><label for="refundPassengers">Passengers</label><input type="number" id="refundPassengers" value="0" min="0" /></div>
  <div class="form-row"><label for="posRefund">POS Refund</label><input type="number" id="posRefund" value="0" min="0" /></div>
  <div class="form-row"><label for="qrUpiRefund">QR+UPI Refund</label><input type="number" id="qrUpiRefund" value="0" min="0" /></div>
  <div class="form-row"><label for="cashRefund">Cash Refund</label><input type="number" id="cashRefund" value="0" min="0" /></div>
  <div class="total-row">
    <div>Total Refund</div>
    <div id="totalRefund">0</div>
  </div>

  <h2>Booking Form</h2>
  <div class="form-row"><label for="bookingForms">Forms</label><input type="number" id="bookingForms" value="0" min="0" /></div>
  <div class="form-row"><label for="bookingTickets">Tickets</label><input type="number" id="bookingTickets" value="0" min="0" /></div>
  <div class="form-row"><label for="bookingPassengers">Passengers</label><input type="number" id="bookingPassengers" value="0" min="0" /></div>
  <div class="form-row"><label for="posEarning">POS Earning</label><input type="number" id="posEarning" value="0" min="0" /></div>
  <div class="form-row"><label for="qrUpiEarning">QR+UPI Earning</label><input type="number" id="qrUpiEarning" value="0" min="0" /></div>
  <div class="form-row"><label for="cashEarning">Cash Earning</label><input type="number" id="cashEarning" value="0" min="0" /></div>
  <div class="total-row">
    <div>Total Earning</div>
    <div id="totalBookingEarning">0</div>
  </div>

  <h2>QR+UPI EARNING Form</h2>
  <div class="form-row"><label for="qrForms">Forms</label><input type="number" id="qrForms" value="0" min="0" /></div>
  <div class="form-row"><label for="qrTickets">Tickets</label><input type="number" id="qrTickets" value="0" min="0" /></div>
  <div class="form-row"><label for="qrPassengers">Passengers</label><input type="number" id="qrPassengers" value="0" min="0" /></div>
  <div class="form-row"><label for="qrTotalAmount">Total Amount</label><input type="number" id="qrTotalAmount" value="0" min="0" /></div>
  <div class="total-row">
    <div>Total Amount</div>
    <div id="totalQREarning">0</div>
  </div>

  <h2>POS EARNING Form</h2>
  <div class="form-row"><label for="posForms">Forms</label><input type="number" id="posForms" value="0" min="0" /></div>
  <div class="form-row"><label for="posTickets">Tickets</label><input type="number" id="posTickets" value="0" min="0" /></div>
  <div class="form-row"><label for="posPassengers">Passengers</label><input type="number" id="posPassengers" value="0" min="0" /></div>
  <div class="form-row"><label for="posTotalAmount">Total Amount</label><input type="number" id="posTotalAmount" value="0" min="0" /></div>
  <div class="total-row">
    <div>Total Amount</div>
    <div id="totalPOSEarning">0</div>
  </div>

  <button id="downloadBtn">Download Form as Image</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
  const inputs = [
    "shift1", "shift2",
    "refundForms", "refundTickets", "refundPassengers", "posRefund", "qrUpiRefund", "cashRefund",
    "bookingForms", "bookingTickets", "bookingPassengers", "posEarning", "qrUpiEarning", "cashEarning",
    "qrForms", "qrTickets", "qrPassengers", "qrTotalAmount",
    "posForms", "posTickets", "posPassengers", "posTotalAmount"
  ];

  function getIntValue(id) {
    const val = parseInt(document.getElementById(id).value);
    return isNaN(val) ? 0 : val;
  }

  function recalcTotals() {
    document.getElementById("totalWindowsWork").textContent =
      getIntValue("shift1") + getIntValue("shift2");

    document.getElementById("totalRefund").textContent =
      getIntValue("refundForms") + getIntValue("refundTickets") + getIntValue("refundPassengers") +
      getIntValue("posRefund") + getIntValue("qrUpiRefund") + getIntValue("cashRefund");

    document.getElementById("totalBookingEarning").textContent =
      getIntValue("posEarning") + getIntValue("qrUpiEarning") + getIntValue("cashEarning");

    document.getElementById("totalQREarning").textContent =
      getIntValue("qrForms") + getIntValue("qrTickets") + getIntValue("qrPassengers") + getIntValue("qrTotalAmount");

    document.getElementById("totalPOSEarning").textContent =
      getIntValue("posForms") + getIntValue("posTickets") + getIntValue("posPassengers") + getIntValue("posTotalAmount");
  }

  inputs.forEach(id => {
    document.getElementById(id).addEventListener("input", recalcTotals);
  });

  recalcTotals();

  document.getElementById("downloadBtn").addEventListener("click", () => {
    html2canvas(document.getElementById("form-container")).then(canvas => {
      canvas.toBlob(blob => {
        const link = document.createElement("a");
        link.download = "auto_total_form.png";
        link.href = URL.createObjectURL(blob);
        link.click();
        URL.revokeObjectURL(link.href);
      });
    });
  });
</script>

</body>
</html>
