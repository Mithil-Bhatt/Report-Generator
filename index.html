<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Auto Total Report</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 16px;
    background: #f0f2f5;
  }
  #form-container {
    position: relative;
    background: white;
    padding: 24px;
    border-radius: 10px;
    box-shadow: 0 0 10px #ccc;
    max-width: 800px;
    margin: auto;
  }
  h1, h2 {
    margin-top: 0;
  }
  h1 {
    font-size: 24px;
    color: #007bff;
    margin-bottom: 6px;
  }
  h2 {
    background: #e9ecef;
    padding: 8px;
    border-radius: 6px;
    font-size: 18px;
    margin-bottom: 10px;
  }
  #reportDate {
    font-size: 14px;
    color: #555;
    margin-bottom: 20px;
  }
  .form-row {
    display: flex;
    margin: 6px 0;
    align-items: center;
  }
  .form-row label {
    flex: 3;
  }
  .form-row input[type="number"] {
    flex: 2;
    padding: 6px 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }
  .total-row {
    display: flex;
    margin: 12px 0;
    background: #d1ecf1;
    padding: 8px;
    font-weight: bold;
    border-left: 5px solid #17a2b8;
    border-radius: 4px;
  }
  .total-row div:first-child {
    flex: 3;
  }
  .total-row div:last-child {
    flex: 2;
    text-align: right;
  }
  .section {
    border: 1px solid #dee2e6;
    padding: 16px;
    margin-bottom: 20px;
    border-radius: 6px;
    background: #ffffff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }
  button {
    display: block;
    margin: 30px auto 0;
    padding: 12px 28px;
    font-size: 16px;
    border: none;
    background: #007bff;
    color: white;
    border-radius: 6px;
    cursor: pointer;
  }
  button:hover {
    background: #0056b3;
  }
  .summary p {
    margin: 4px 0;
  }
</style>
</head>
<body>

<div id="form-container">
 <a href="Digital_Transaction.html"  style="position: absolute; top: 24px; right: 24px; text-decoration: none; color: #007bff; font-weight: bold;">
    Digital Transaction Report
  </a>
  <div style="text-align:center;">
    <h1>Daily Transaction Report</h1>
    <p id="reportDate"></p>
  </div>

  <div class="section">
    <h2>Number of Windows Work</h2>
    <div class="form-row"><label for="shift1">Shift 1</label><input type="number" id="shift1" min="0" /></div>
    <div class="form-row"><label for="shift2">Shift 2</label><input type="number" id="shift2"  min="0" /></div>
    <div class="total-row"><div>Total</div><div id="totalWindowsWork">0</div></div>
  </div>

  <div class="section">
    <h2>Refund Form</h2>
    <div class="form-row"><label for="refundForms">Forms</label><input type="number" id="refundForms"  min="0" /></div>
    <div class="form-row"><label for="refundTickets">Tickets</label><input type="number" id="refundTickets" min="0" /></div>
    <div class="form-row"><label for="refundPassengers">Passengers</label><input type="number" id="refundPassengers"  min="0" /></div>
    <div class="form-row"><label for="posRefund">POS Refund</label><input type="number" id="posRefund"  min="0" /></div>
    <div class="form-row"><label for="qrUpiRefund">QR+UPI Refund</label><input type="number" id="qrUpiRefund"  min="0" /></div>
    <div class="form-row"><label for="cashRefund">Cash Refund</label><input type="number" id="cashRefund"  min="0" /></div>
    <div class="total-row"><div>Total Refund</div><div id="totalRefund">0</div></div>
  </div>

  <div class="section">
    <h2>Booking Form</h2>
    <div class="form-row"><label for="bookingForms">Forms</label><input type="number" id="bookingForms" min="0" /></div>
    <div class="form-row"><label for="bookingTickets">Tickets</label><input type="number" id="bookingTickets"  min="0" /></div>
    <div class="form-row"><label for="bookingPassengers">Passengers</label><input type="number" id="bookingPassengers" value="0" min="0" /></div>
    <div class="form-row"><label for="posEarning">POS Earning</label><input type="number" id="posEarning"  min="0" /></div>
    <div class="form-row"><label for="qrUpiEarning">QR+UPI Earning</label><input type="number" id="qrUpiEarning"  min="0" /></div>
    <div class="form-row"><label for="cashEarning">Cash Earning</label><input type="number" id="cashEarning"  min="0" /></div>
    <div class="total-row"><div>Total Earning</div><div id="totalBookingEarning">0</div></div>
  </div>

  <div class="section">
    <h2>QR+UPI Earning</h2>
    <div class="form-row"><label for="qrForms">Forms</label><input type="number" id="qrForms"  min="0" /></div>
    <div class="form-row"><label for="qrTickets">Tickets</label><input type="number" id="qrTickets"  min="0" /></div>
    <div class="form-row"><label for="qrPassengers">Passengers</label><input type="number" id="qrPassengers"  min="0" /></div>
    <div class="form-row"><label for="qrTotalAmount">Total Amount</label><input type="number" id="qrTotalAmount"  min="0" /></div>
    <div class="total-row"><div>Total Amount</div><div id="totalQREarning">0</div></div>
  </div>

  <div class="section">
    <h2>POS Earning</h2>
    <div class="form-row"><label for="posForms">Forms</label><input type="number" id="posForms"  min="0" /></div>
    <div class="form-row"><label for="posTickets">Tickets</label><input type="number" id="posTickets"  min="0" /></div>
    <div class="form-row"><label for="posPassengers">Passengers</label><input type="number" id="posPassengers"  min="0" /></div>
    <div class="form-row"><label for="posTotalAmount">Total Amount</label><input type="number" id="posTotalAmount"  min="0" /></div>
    <div class="total-row"><div>Total Amount</div><div id="totalPOSEarning">0</div></div>
  </div>

  <div class="section summary">
    <h2>Summary</h2>
    <p><strong>Total Windows Work:</strong> <span id="summaryTotalWindows">0</span></p>
    <p><strong>Total Refund:</strong> <span id="summaryTotalRefund">0</span></p>
    <p><strong>Total Booking Earnings:</strong> <span id="summaryTotalBooking">0</span></p>
  </div>

  <button id="downloadBtn">Download Report as Image</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
  document.getElementById("reportDate").textContent =
    `Date: ${new Date().toLocaleDateString()}`;

  const inputs = [
    "shift1", "shift2",
    "refundForms", "refundTickets", "refundPassengers", "posRefund", "qrUpiRefund", "cashRefund",
    "bookingForms", "bookingTickets", "bookingPassengers", "posEarning", "qrUpiEarning", "cashEarning",
    "qrForms", "qrTickets", "qrPassengers", "qrTotalAmount",
    "posForms", "posTickets", "posPassengers", "posTotalAmount"
  ];

  function getIntValue(id) {
    const val = parseInt(document.getElementById(id).value);
    return isNaN(val) ? 0 : val;
  }

  function recalcTotals() {
    const totalWindows = getIntValue("shift1") + getIntValue("shift2");
    const totalRefund = getIntValue("refundForms") + getIntValue("refundTickets") +
                        getIntValue("refundPassengers") + getIntValue("posRefund") +
                        getIntValue("qrUpiRefund") + getIntValue("cashRefund");
    const totalBooking = getIntValue("posEarning") + getIntValue("qrUpiEarning") + getIntValue("cashEarning");
    const totalQR = getIntValue("qrForms") + getIntValue("qrTickets") + getIntValue("qrPassengers") + getIntValue("qrTotalAmount");
    const totalPOS = getIntValue("posForms") + getIntValue("posTickets") + getIntValue("posPassengers") + getIntValue("posTotalAmount");

    document.getElementById("totalWindowsWork").textContent = totalWindows;
    document.getElementById("totalRefund").textContent = totalRefund;
    document.getElementById("totalBookingEarning").textContent = totalBooking;
    document.getElementById("totalQREarning").textContent = totalQR;
    document.getElementById("totalPOSEarning").textContent = totalPOS;

    document.getElementById("summaryTotalWindows").textContent = totalWindows;
    document.getElementById("summaryTotalRefund").textContent = totalRefund;
    document.getElementById("summaryTotalBooking").textContent = totalBooking;
  }

  inputs.forEach(id => {
    document.getElementById(id).addEventListener("input", recalcTotals);
  });

  recalcTotals();

  document.getElementById("downloadBtn").addEventListener("click", () => {
    const button = document.getElementById("downloadBtn");
    button.style.display = "none"; // Hide button

    setTimeout(() => {
      html2canvas(document.getElementById("form-container")).then(canvas => {
        canvas.toBlob(blob => {
          const link = document.createElement("a");
          link.download = `Report_${new Date().toLocaleDateString().replace(/\//g, "-")}.png`;
          link.href = URL.createObjectURL(blob);
          link.click();
          URL.revokeObjectURL(link.href);
          button.style.display = "block"; // Show button again
        });
      });
    }, 100); // Slight delay to allow DOM update
  });
</script>

</body>
</html>
