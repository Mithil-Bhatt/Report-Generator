<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Transaction Forms</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f0f2f5;
    }
    .tabs {
      display: flex;
      justify-content: center;
      background: #007bff;
    }
    .tab {
      padding: 14px 20px;
      cursor: pointer;
      color: white;
      font-weight: bold;
      border-bottom: 4px solid transparent;
    }
    .tab.active {
      background: #0056b3;
      border-bottom: 4px solid white;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    #form-container {
      background: white;
      padding: 24px;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
      max-width: 800px;
      margin: 20px auto;
      position: relative;
    }
	
	body {
    font-family: Arial, sans-serif;
    margin: 16px;
    background: #f0f2f5;
  }
  #form-container {
    position: relative;
    background: white;
    padding: 24px;
    border-radius: 10px;
    box-shadow: 0 0 10px #ccc;
    max-width: 800px;
    margin: auto;
  }
  h1, h2 {
    margin-top: 0;
  }
  h1 {
    font-size: 24px;
    color: #007bff;
    margin-bottom: 6px;
  }
  h2 {
    background: #e9ecef;
    padding: 8px;
    border-radius: 6px;
    font-size: 18px;
    margin-bottom: 10px;
  }
  #reportDate {
    font-size: 14px;
    color: #555;
    margin-bottom: 20px;
  }
  .form-row {
    display: flex;
    margin: 6px 0;
    align-items: center;
  }
  .form-row label {
    flex: 3;
  }
  .form-row input[type="number"] {
    flex: 2;
    padding: 6px 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }
  .total-row {
    display: flex;
    margin: 12px 0;
    background: #d1ecf1;
    padding: 8px;
    font-weight: bold;
    border-left: 5px solid #17a2b8;
    border-radius: 4px;
  }
  .total-row div:first-child {
    flex: 3;
  }
  .total-row div:last-child {
    flex: 2;
    text-align: right;
  }
  .section {
    border: 1px solid #dee2e6;
    padding: 16px;
    margin-bottom: 20px;
    border-radius: 6px;
    background: #ffffff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }
  button {
    display: block;
    margin: 30px auto 0;
    padding: 12px 28px;
    font-size: 16px;
    border: none;
    background: #007bff;
    color: white;
    border-radius: 6px;
    cursor: pointer;
  }
  button:hover {
    background: #0056b3;
  }
  .summary p {
    margin: 4px 0;
  }
    /* Reuse your CSS here... */
  </style>
</head>
<body>

<!-- Tabs -->
<div class="tabs">
  <div class="tab active" onclick="showTab('form1')">Daily Transaction Report</div>
  <div class="tab" onclick="showTab('form2')">Digital Transaction PRS-ADI</div>
</div>

<!-- Tab 1 -->
<div id="form1" class="tab-content active">
  
  
   
   
   <div id="form-container">
 
  <div style="text-align:center;">
    <h1>Daily Transaction Report</h1>
    <p id="reportDate"></p>
  </div>

  <div class="section">
    <h2>Number of Windows Work</h2>
    <div class="form-row"><label for="shift1">Shift 1</label><input type="number" id="shift1" min="0" /></div>
    <div class="form-row"><label for="shift2">Shift 2</label><input type="number" id="shift2"  min="0" /></div>
    <div class="total-row"><div>Total</div><div id="totalWindowsWork">0</div></div>
  </div>

  <div class="section">
    <h2>Refund Form</h2>
    <div class="form-row"><label for="refundForms">Forms</label><input type="number" id="refundForms"  min="0" /></div>
    <div class="form-row"><label for="refundTickets">Tickets</label><input type="number" id="refundTickets" min="0" /></div>
    <div class="form-row"><label for="refundPassengers">Passengers</label><input type="number" id="refundPassengers"  min="0" /></div>
    <div class="form-row"><label for="posRefund">POS Refund</label><input type="number" id="posRefund"  min="0" /></div>
    <div class="form-row"><label for="qrUpiRefund">QR+UPI Refund</label><input type="number" id="qrUpiRefund"  min="0" /></div>
    <div class="form-row"><label for="cashRefund">Cash Refund</label><input type="number" id="cashRefund"  min="0" /></div>
    <div class="total-row"><div>Total Refund</div><div id="totalRefund">0</div></div>
  </div>

  <div class="section">
    <h2>Booking Form</h2>
    <div class="form-row"><label for="bookingForms">Forms</label><input type="number" id="bookingForms" min="0" /></div>
    <div class="form-row"><label for="bookingTickets">Tickets</label><input type="number" id="bookingTickets"  min="0" /></div>
    <div class="form-row"><label for="bookingPassengers">Passengers</label><input type="number" id="bookingPassengers"  min="0" /></div>
    <div class="form-row"><label for="posEarning">POS Earning</label><input type="number" id="posEarning"  min="0" /></div>
    <div class="form-row"><label for="qrUpiEarning">QR+UPI Earning</label><input type="number" id="qrUpiEarning"  min="0" /></div>
    <div class="form-row"><label for="cashEarning">Cash Earning</label><input type="number" id="cashEarning"  min="0" /></div>
    <div class="total-row"><div>Total Earning</div><div id="totalBookingEarning">0</div></div>
  </div>

  <div class="section">
    <h2>QR+UPI Earning</h2>
    <div class="form-row"><label for="qrForms">Forms</label><input type="number" id="qrForms"  min="0" /></div>
    <div class="form-row"><label for="qrTickets">Tickets</label><input type="number" id="qrTickets"  min="0" /></div>
    <div class="form-row"><label for="qrPassengers">Passengers</label><input type="number" id="qrPassengers"  min="0" /></div>
    <div class="form-row"><label for="qrTotalAmount">Total Amount</label><input type="number" id="qrTotalAmount"  min="0" /></div>
    <div class="total-row"><div>Total Amount</div><div id="totalQREarning">0</div></div>
  </div>

  <div class="section">
    <h2>POS Earning</h2>
    <div class="form-row"><label for="posForms">Forms</label><input type="number" id="posForms"  min="0" /></div>
    <div class="form-row"><label for="posTickets">Tickets</label><input type="number" id="posTickets"  min="0" /></div>
    <div class="form-row"><label for="posPassengers">Passengers</label><input type="number" id="posPassengers"  min="0" /></div>
    <div class="form-row"><label for="posTotalAmount">Total Amount</label><input type="number" id="posTotalAmount"  min="0" /></div>
    <div class="total-row"><div>Total Amount</div><div id="totalPOSEarning">0</div></div>
  </div>

  <div class="section summary">
    <h2>Summary</h2>
    <p><strong>Total Windows Work:</strong> <span id="summaryTotalWindows">0</span></p>
    <p><strong>Total Refund:</strong> <span id="summaryTotalRefund">0</span></p>
    <p><strong>Total Booking Earnings:</strong> <span id="summaryTotalBooking">0</span></p>
  </div>

  <button id="downloadBtn">Download Report as Image</button>
</div>
   
   
    <p>Replace with Form 1 content</p>
 
</div>

<!-- Tab 2 -->
<div id="form2" class="tab-content">

   
   
   <div id="form-container">

  <h1>Digital Transaction PRS-ADI</h1>
  <p id="reportDate"></p>

  <div class="section">
    <h2>Station Info</h2>
    <div class="form-row"><label for="stationCode">Station Code</label><input type="text" id="f2stationCode" /></div>
    <div class="form-row"><label for="stationName">Station Name</label><input type="text" id="f2stationName" /></div>
  </div>

  <div class="section">
    <h2>Refund Form</h2>
    <div class="form-row"><label for="refundForms">Forms</label><input type="number" id="f2refundForms" /></div>
    <div class="form-row"><label for="refundTickets">Tickets</label><input type="number" id="f2refundTickets" /></div>
    <div class="form-row"><label for="refundPassengers">Passengers</label><input type="number" id="f2refundPassengers" /></div>
    <div class="form-row"><label for="posRefund">POS Refund = A</label><input type="number" id="f2posRefund" /></div>
    <div class="form-row"><label for="qrRefund">QR Refund = B</label><input type="number" id="f2qrRefund" /></div>
    <div class="form-row"><label for="cashRefund">Cash Refund = C</label><input type="number" id="f2cashRefund" /></div>
    <div class="total-row"><div>Total Refund = A + B + C</div><div id="f2totalRefund">0</div></div>
  </div>

  <div class="section">
    <h2>Booking Form</h2>
    <div class="form-row"><label for="bookingForms">Forms</label><input type="number" id="f2bookingForms" /></div>
    <div class="form-row"><label for="bookingTickets">Tickets</label><input type="number" id="f2bookingTickets" /></div>
    <div class="form-row"><label for="bookingPassengers">Passengers</label><input type="number" id="f2bookingPassengers" /></div>
    <div class="form-row"><label for="posEarning">POS Earning = A</label><input type="number" id="f2posEarning" /></div>
    <div class="form-row"><label for="qrEarning">QR Earning = B</label><input type="number" id="f2qrEarning" /></div>
    <div class="form-row"><label for="cashEarning">Cash Earning = C</label><input type="number" id="f2cashEarning" /></div>
    <div class="total-row"><div>Total Earning = A + B + C</div><div id="f2totalEarning">0</div></div>
  </div>

  <div class="section">
    <h2>Cashless Earning</h2>
    <div class="form-row"><label for="cashlessForms">Forms</label><input type="number" id="f2cashlessForms" /></div>
    <div class="form-row"><label for="cashlessTickets">Tickets</label><input type="number" id="f2cashlessTickets" /></div>
    <div class="form-row"><label for="cashlessPassengers">Passengers</label><input type="number" id="f2cashlessPassengers" /></div>
    <div class="form-row"><label for="cashlessTotal">Total Amount (POS + QR)</label><input type="number" id="f2cashlessTotal" /></div>
  </div>

  <div class="section">
    <h2>Percentages & Summary</h2>
    <div class="form-row"><label for="ticketPercent">Tickets %</label><input type="number" id="f2ticketPercent" /></div>
    <div class="form-row"><label for="earningPercent">Earning %</label><input type="number" id="f2earningPercent" /></div>
    <div class="form-row"><label for="grossEarning">Gross Earning</label><input type="number" id="f2grossEarning" /></div>
    <div class="form-row"><label for="posTickets">POS Tickets</label><input type="number" id="f2posTickets" /></div>
    <div class="form-row"><label for="qrTickets">QR Tickets</label><input type="number" id="f2qrTickets" /></div>
  </div>

  <button id="downloadBtn">Download Report as Image</button>
</div>
   
   
    <p>Replace with Form 2 content</p>

</div>


<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
  function showTab(tabId) {
    document.querySelectorAll(".tab-content").forEach(tab => {
      tab.classList.remove("active");
    });
    document.querySelectorAll(".tab").forEach(btn => {
      btn.classList.remove("active");
    });
    document.getElementById(tabId).classList.add("active");
    event.target.classList.add("active");
  }
  
  
  
  

  document.querySelectorAll("#reportDate").forEach(el => {
    el.textContent = `Date: ${new Date().toLocaleDateString()}`;
  });


  // Form 1 Script

  const form1Inputs = [
    "shift1", "shift2",
    "refundForms", "refundTickets", "refundPassengers", "posRefund", "qrUpiRefund", "cashRefund",
    "bookingForms", "bookingTickets", "bookingPassengers", "posEarning", "qrUpiEarning", "cashEarning",
    "qrForms", "qrTickets", "qrPassengers", "qrTotalAmount",
    "posForms", "posTickets", "posPassengers", "posTotalAmount"
  ];

  function getIntValue(id) {
    const el = document.getElementById(id);
    if (!el) return 0;
    const val = parseInt(el.value);
    return isNaN(val) ? 0 : val;
  }

  function recalcForm1() {
    const totalWindows = getIntValue("shift1") + getIntValue("shift2");
    const totalRefund = getIntValue("refundForms") + getIntValue("refundTickets") +
                        getIntValue("refundPassengers") + getIntValue("posRefund") +
                        getIntValue("qrUpiRefund") + getIntValue("cashRefund");
    const totalBooking = getIntValue("posEarning") + getIntValue("qrUpiEarning") + getIntValue("cashEarning");
    const totalQR = getIntValue("qrForms") + getIntValue("qrTickets") + getIntValue("qrPassengers") + getIntValue("qrTotalAmount");
    const totalPOS = getIntValue("posForms") + getIntValue("posTickets") + getIntValue("posPassengers") + getIntValue("posTotalAmount");

    const updateText = (id, value) => {
      const el = document.getElementById(id);
      if (el) el.textContent = value;
    };

    updateText("totalWindowsWork", totalWindows);
    updateText("totalRefund", totalRefund);
    updateText("totalBookingEarning", totalBooking);
    updateText("totalQREarning", totalQR);
    updateText("totalPOSEarning", totalPOS);

    updateText("summaryTotalWindows", totalWindows);
    updateText("summaryTotalRefund", totalRefund);
    updateText("summaryTotalBooking", totalBooking);
  }

  form1Inputs.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.addEventListener("input", recalcForm1);
  });

  recalcForm1(); // Initialize


  // Form 2 Script

  const form2Inputs = [
    "f2posRefund", "f2qrRefund", "f2cashRefund",
    "f2posEarning", "f2qrEarning", "f2cashEarning",
    "f2cashlessTickets", "f2bookingTickets"
  ];

  function getFloatValue(id) {
    const el = document.getElementById(id);
    if (!el) return 0;
    return parseFloat(el.value) || 0;
  }

  function recalcForm2() {
    const posRefund = getFloatValue("f2posRefund");
    const qrRefund = getFloatValue("f2qrRefund");
    const cashRefund = getFloatValue("f2cashRefund");
    const totalRefund = posRefund + qrRefund + cashRefund;
    const elRefund = document.getElementById("f2totalRefund");
    if (elRefund) elRefund.textContent = totalRefund.toFixed(2);

    const posEarning = getFloatValue("f2posEarning");
    const qrEarning = getFloatValue("f2qrEarning");
    const cashEarning = getFloatValue("f2cashEarning");
    const totalEarning = posEarning + qrEarning + cashEarning;
    const elEarning = document.getElementById("f2totalEarning");
    if (elEarning) elEarning.textContent = totalEarning.toFixed(2);

    const cashlessTotal = posEarning + qrEarning;
    const elCashless = document.getElementById("f2cashlessTotal");
    if (elCashless) elCashless.value = cashlessTotal.toFixed(2);

    const cashlessTickets = getFloatValue("f2cashlessTickets");
    const bookingTickets = getFloatValue("f2bookingTickets");
    const ticketPercent = bookingTickets ? (cashlessTickets / bookingTickets) * 100 : 0;
    const elPercentTickets = document.getElementById("f2ticketPercent");
    if (elPercentTickets) elPercentTickets.value = ticketPercent.toFixed(2);

    const earningPercent = totalEarning ? (cashlessTotal / totalEarning) * 100 : 0;
    const elPercentEarnings = document.getElementById("f2earningPercent");
    if (elPercentEarnings) elPercentEarnings.value = earningPercent.toFixed(2);
  }

  form2Inputs.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.addEventListener("input", recalcForm2);
  });

  recalcForm2(); 

  
  document.querySelectorAll("#downloadBtn").forEach(btn => {
    btn.addEventListener("click", () => {
      btn.style.display = "none";

      // Find the nearest visible form container
      const parentContainer = btn.closest(".tab-content").querySelector("#form-container");
      if (!parentContainer) {
        alert("Form container not found.");
        return;
      }

      setTimeout(() => {
        html2canvas(parentContainer).then(canvas => {
          canvas.toBlob(blob => {
            const link = document.createElement("a");
            const fileName = parentContainer.querySelector("h1")?.textContent?.replace(/\s+/g, "_") || "Report";
            link.download = `${fileName}_${new Date().toLocaleDateString().replace(/\//g, "-")}.png`;
            link.href = URL.createObjectURL(blob);
            link.click();
            URL.revokeObjectURL(link.href);
            btn.style.display = "block";
          });
        });
      }, 100);
    });
  });
  
  
  
  
  
</script>
</body>
</html>
